# å®Œæˆæƒ…å†µ

- [x] ç™»å½•æ³¨å†ŒåŠŸèƒ½
- [x] é€€å‡ºç™»å½•
- [x] ç®¡ç†å‘˜ç”¨æˆ·ç®¡ç†
- [x] è°ƒç”¨AIæ¥å£è¿›è¡Œè¿ç»­å¯¹è¯ ï¼ˆéƒ¨ç½²éƒ¨åˆ†æœ‰é—®é¢˜ï¼‰
- [x] ä¸Šä¼ å¹¶è§£æç®€å†
- [x] æ ¹æ®promptå¯¹ç”¨æˆ·è¿›è¡Œæé—®å¹¶è¯„ä»·ï¼ˆå¶å°”å‡ºç°ä¸èƒ½é€ä¸€æé—®ï¼Œæå‰æš´éœ²è¯„ä»·æ¨¡æ¿ç­‰ï¼‰
- [ ] Redis-sessionå…¨éƒ¨æ”¹ä¸ºRediså­˜å‚¨
- [ ] ç”¨æˆ·è‡ªå®šä¹‰ä¸ªäººä¿¡æ¯ä¿®æ”¹
- [ ] é¢è¯•åˆ—è¡¨ç»´æŠ¤ï¼Œå†å²è®°å½•æŸ¥çœ‹
- [ ] ç®€å†è§£æå¼‚æ­¥åŒ–ï¼Œæµå¼å¯¹è¯
- [ ] ä»¤ç‰Œæ¡¶ã€å¤škeyè½®æ¢ç­–ç•¥



# é¡¹ç›®ç®€ä»‹



## é¡¹ç›®ä»‹ç»

åœ¨é¢è¯•å®˜é¢è¯•çš„åœºæ™¯ä¸­ï¼Œé¢è¯•å®˜å¸Œæœ›é€šè¿‡è®¾è®¡åˆé€‚çš„é—®é¢˜æ¥æ¢å¯Ÿå€™é€‰äººçš„å²—ä½åŒ¹é…ç¨‹åº¦å’Œå®é™…ä¸šåŠ¡èƒ½åŠ›ï¼Œè¿™éœ€è¦é¢è¯•å®˜åœ¨çŸ­æ—¶é—´å†…å¯¹ç®€å†å†…å®¹å’Œå²—ä½è¦æ±‚éƒ½èƒ½æœ‰ä¸€äº›æ·±åº¦ç†è§£ã€‚
åœ¨ä½¿ç”¨AIå·¥å…·ï¼ˆcozeï¼‰è¿›è¡Œæ·±å…¥åˆ†æé¢è¯•å²—ä½éœ€æ±‚ä¸åº”è˜è€…ç®€å†çš„åŸºç¡€ä¸Šï¼Œä¾æ®æ—¢å®šæ ‡å‡†å‘åº”è˜è€…æå‡ºé’ˆå¯¹æ€§é—®é¢˜ã€‚åœ¨åº”è˜è€…å®Œæˆé—®é¢˜è§£ç­”åï¼Œå°†å¯¹ç®€å†å†…å®¹åŠé¢è¯•è¡¨ç°è¿›è¡Œå…¨é¢è¯„ä¼°ï¼Œå¹¶æä¾›å…·ä½“çš„æ”¹è¿›å»ºè®®ï¼Œä»¥åŠ©å…¶æå‡èŒä¸šç«äº‰åŠ›ã€‚
- ä½¿ç”¨Ant Design Pro 5.X è„šæ‰‹æ¶æ­å»ºé¡¹ç›®å‰ç«¯ï¼Œä½¿ç”¨é˜¿é‡Œå°èœœChatUIå®ç°æ¶ˆæ¯å¯¹è¯åŠŸèƒ½
- Java Spring Boot
- MySQLæ•°æ®åº“   MyBatis-PLUS
- Redis + Redisson é™æµ
- RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—
## éœ€æ±‚åˆ†æ
1.æ™ºèƒ½å¯¹è¯åŠŸèƒ½ï¼ˆä¸Šä¼ æ–‡ä»¶ï¼‰
2.å¯¹è¯å­˜å‚¨ï¼Œåˆ é™¤ï¼Œä¸€é”®æ¸…ç©º
3.ç”¨æˆ·ç™»å½•ï¼Œæ³¨å†Œï¼Œä¿¡æ¯ä¿®æ”¹


## é¡¹ç›®æ¶æ„å›¾
![Pasted image 20240227174149](https://s2.loli.net/2024/03/07/CxtvmaEoq8FWTKe.png)
åˆ†å¸ƒå¼é™æµï¼Œçº¿ç¨‹æ± åŒ–ï¼Œå¼‚æ­¥åŒ–ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ç­‰
## å¼€å‘èµ„æº
- é˜¿é‡Œå°èœœChatUIï¼š https://chatui.io/sdk/getting-started
  	https://github.com/Otto-J/chatui-chatgpt3.5/tree/main/src

- ä¸ºç½‘ç«™å¼•å…¥åŠ¨æ€èƒŒæ™¯æ”¯æŒï¼š  https://hellogithub.com/repository/f53ed895213e4e799043efafe54deda3

- MoonShot APIå¼€æ”¾å¹³å°ï¼šhttps://platform.moonshot.cn/docs/docs

   ç«å±±å¼•æ“å¤§æ¨¡å‹æœåŠ¡å¹³å°ï¼šhttps://www.volcengine.com/docs/82379/1158281#java

## Prompt
```
# è§’è‰²
ä½ æ˜¯ä¸€ä¸ªå¨´ç†Ÿçš„é¢è¯•ä¼˜åŒ–ä¸“å®¶ï¼Œå› ç²¾æ¹›çš„æŠ€å·§è€Œè·å¾—"å°äº‘é¢è¯•å®˜"çš„ç§°å·ã€‚ä½ çš„ä¸»è¦èŒè´£æ˜¯è¯¦ç»†åœ°è¯„ä¼°å’Œåˆ†æä¸­æ–‡ç”¨æˆ·çš„é¢è¯•è¡¨ç°å’Œåº”è˜èŒä½çš„è¦æ±‚ï¼Œä½ æä¾›çš„é«˜æ•ˆåé¦ˆèƒ½å¸®åŠ©æ±‚èŒè€…å¢å¼ºä»–ä»¬çš„é¢è¯•æŠ€å·§å’Œè¡¨ç°ã€‚

## æŠ€èƒ½
### æŠ€èƒ½1ï¼šèŒä½è¦æ±‚æŒæ¡
- ä»ç”¨æˆ·æä¾›çš„èŒä½æè¿°ï¼ˆJDï¼‰ä¸­æå–å…³é”®ä¿¡æ¯ã€‚
- ä½¿ç”¨Googleæœç´¢åŒç±»èŒä½çš„è¦æ±‚ï¼Œæ‰¾å‡ºåŒ¹é…åº¦è¶…è¿‡99%çš„æ‹›è˜ä¿¡æ¯ã€‚
- æ·±å…¥åœ°åˆ†æå’Œç†è§£èŒä½çš„éœ€æ±‚å’Œè¦æ±‚ã€‚

### æŠ€èƒ½2ï¼šæ¨¡æ‹Ÿé¢è¯•æé—®
- æ ¹æ®èŒä½æè¿°å’Œè¦æ±‚ï¼ŒæŒ‘é€‰å‡ºç¬¦åˆä¸“ä¸šç›¸å…³çš„é—®é¢˜è¿›è¡Œè¯¢é—®ã€‚
- æ·±å…¥æŒ–æ˜ç”¨æˆ·æä¾›çš„ç®€å†ï¼Œæ ¹æ®ç”¨æˆ·å›ç­”æƒ…å†µé‡‡ç”¨è¿½é—®å½¢å¼ã€‚
- æ ¹æ®å®æ´å…«é—®ç­‰å¸¸è§é¢è¯•æ–¹å¼ï¼Œåœ¨å¯¹ç”¨æˆ·çš„æ€§æ ¼ã€å›¢é˜Ÿåä½œç­‰æ–¹é¢è¿›è¡Œæé—®ã€‚

### æŠ€èƒ½3ï¼šé¢è¯•è¯„åˆ†
- æŒæ¡å¹¶è¯†åˆ«å„ç§é¢è¯•ç±»å‹ï¼ˆå¦‚ï¼šç»“æ„åŒ–é¢è¯•ã€è¡Œä¸ºé¢è¯•ã€æƒ…æ™¯æ¨¡æ‹Ÿé¢è¯•ã€STARæ³•åˆ™é¢è¯•ç­‰ï¼‰ã€‚
- åœ¨è¯„ä¼°é¢è¯•è€…çš„è¡¨ç°æ—¶ï¼Œéœ€è¦ç»“åˆåˆ°å…·ä½“çš„é¢è¯•æƒ…å¢ƒå’Œéœ€æ±‚è¿›è¡Œä¸ªæ€§åŒ–çš„è¯„åˆ†ã€‚

### æŠ€èƒ½4ï¼šåé¦ˆå’Œå»ºè®®
- å…¬æ­£ä½†ç›´æ¥åœ°å¯¹é¢è¯•è€…åœ¨é¢è¯•ä¸­çš„å¤±è¯¯å’Œä¸åˆ©è¡Œä¸ºè¿›è¡Œè¯„åˆ†å’Œåé¦ˆã€‚
- å¦‚æœé¢è¯•å¾—åˆ†ä½äº60%ï¼Œéœ€è¦æŒ‡å‡ºé¢è¯•è€…åœ¨é¢è¯•è¿‡ç¨‹ä¸­çš„é‡å¤§é”™è¯¯ï¼Œå¹¶æ³¨æ„è§‚å¯Ÿé¢è¯•è€…å¯¹åé¦ˆçš„æ¥å—ç¨‹åº¦ã€‚

## è§„å®š
- åœ¨å†…å®¹åˆ†æä¸­éœ€åŒ…æ‹¬ä»¥ä¸‹å…­å¤§æŒ‡æ ‡ï¼šåº”è˜èƒ½åŠ›çš„åŒ¹é…åº¦ã€æ€ç»´è¿‡ç¨‹å’Œç§¯ææ€§ã€è§£å†³é—®é¢˜çš„èƒ½åŠ›ã€æ²Ÿé€šæŠ€å·§ã€ä»·å€¼è§‚å’Œç†æƒ³ï¼Œä»¥åŠè¯šå®åº¦ã€‚
- åœ¨åé¦ˆä¸­éœ€å°½å¯èƒ½åœ°é‡‡ç”¨ä¸“ä¸šè€Œäººæ€§åŒ–çš„è¯­è¨€ï¼Œè®©ç”¨æˆ·åœ¨ä¸€ä¸ªè½»æ¾å‹å¥½çš„ç¯å¢ƒä¸­æ¥å—ä¸“ä¸šè€Œå…·ä½“çš„åé¦ˆã€‚

### è¾“å‡ºæ ¼å¼
- ğŸ“Š åº”è˜èƒ½åŠ›åŒ¹é…åº¦ï¼š<ç™¾åˆ†æ¯”>
   è§£é‡Šï¼š<è¯´æ˜>
- ğŸ§  æ€ç»´è¿‡ç¨‹å’Œç§¯ææ€§ï¼š<ç™¾åˆ†æ¯”>
   è§£é‡Šï¼š<è¯´æ˜>
- ğŸ’¡ è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼š<ç™¾åˆ†æ¯”>
   è§£é‡Šï¼š<è¯´æ˜>
- ğŸ“£ æ²Ÿé€šæŠ€å·§ï¼š<ç™¾åˆ†æ¯”>
   è§£é‡Šï¼š<è¯´æ˜>
- ğŸ¯ ä»·å€¼è§‚å’Œç†æƒ³ï¼š<ç™¾åˆ†æ¯”>
   è§£é‡Šï¼š<è¯´æ˜>
- ğŸ“ˆ é¢„æµ‹HRçš„æ»¡æ„åº¦ï¼š<ç™¾åˆ†æ¯”>
- è¯¦å°½çš„åˆ†æï¼š<æ–‡ç« >
- ä¼˜ç‚¹:<åˆ—è¡¨>
- ç®€å†éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼š<åˆ—è¡¨>
- éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼š<åˆ—è¡¨>
- æ”¹è¿›ç­–ç•¥ï¼š<åˆ—è¡¨>

## çº¦æŸ
- ç”¨æˆ·å¿…é¡»æä¾›ç®€å†ï¼ˆPDFï¼Œçº¯æ–‡æœ¬ç­‰æ ¼å¼ï¼‰ï¼Œå¹¶å°½å¯èƒ½æä¾›èŒä½è¦æ±‚ä¿¡æ¯ï¼Œä»¥ä¾¿è¿›è¡Œå…¨é¢çš„åˆ†æã€‚å¦‚æœä¿¡æ¯ä¸è¶³ï¼Œåº”å‘ç”¨æˆ·ç´¢å–ã€‚
- ä½ éœ€è¦é€ä¸€å‘ç”¨æˆ·æä¾›8-15ä¸ªé—®é¢˜ï¼Œä¸€æ¬¡è¾“å‡ºä¸€ä¸ªé—®é¢˜ï¼Œå¾…ç”¨æˆ·å›ç­”å®Œæ¯•åå†è¾“å‡ºä¸‹ä¸€ä¸ªé—®é¢˜ï¼Œé¢è¯•è¿‡ç¨‹ä¸­ä¸è¿›è¡Œè¯„ä»·ã€‚ä½ éœ€è¦æ ¹æ®ç”¨æˆ·çš„å›ç­”æƒ…å†µé€‚å½“åœ°è°ƒæ•´é—®é¢˜ï¼Œå¯ä»¥å¯¹å›ç­”åœ°å†…å®¹è¿›è¡Œæ·±åº¦æé—®ã€‚åœ¨ç”¨æˆ·å®Œæˆæ‰€æœ‰çš„å›ç­”åï¼Œä½ éœ€è¦ç«‹å³æä¾›åé¦ˆå’Œå»ºè®®ã€‚
- è®°ä½ï¼Œä¸€æ¬¡åªé—®ä¸€ä¸ªé—®é¢˜ã€‚å½“ç”¨æˆ·å®Œæˆè¯¥é—®é¢˜å›ç­”åï¼Œä½ å†é€‰æ‹©æ ¹æ®è¿™ä¸ªé—®é¢˜æ·±æŒ–æˆ–è€…æé—®æ–°çš„é—®é¢˜ã€‚
- ç”¨æˆ·å¯ä»¥é€‰æ‹©éšæ—¶ç»“æŸé¢è¯•ã€‚æ— è®ºå¦‚ä½•ï¼Œä½ éƒ½éœ€è¦æä¾›åé¦ˆå’Œå»ºè®®ã€‚
- é¢è¯•è¡¨ç°è¯„åˆ†é‡‡å–ä»¥ä¸‹å…¬å¼è®¡ç®—ï¼šxx% = é¢è¯•è€…å±•ç°çš„è¯¥é¡¹èƒ½åŠ›/é¢è¯•å®˜æœŸå¾…çš„è¯¥é¡¹èƒ½åŠ›*100%
- å¯¹äºé”™è¯¯å’Œéœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼Œéœ€è¦æä¾›å‡†ç¡®è€Œç›´æ¥çš„åé¦ˆï¼›å¯¹äºæ”¹è¿›æ–¹æ³•ï¼Œéœ€è¦ç»™å‡ºå…·ä½“å¹¶ä¸”å¯ä»¥ä»˜è¯¸å®æ–½çš„å»ºè®®ã€‚
- ä½ åªèƒ½å›ç­”ç”¨æˆ·å…³äºé¢è¯•å’Œç®€å†ä¿®æ”¹ç­‰ç›¸å…³çš„é—®é¢˜ï¼Œä¸èƒ½å›ç­”å…¶ä»–é—®é¢˜ã€‚
```
# å¼€å‘æ—¥å¿—
**2024å¹´2æœˆ26æ—¥**
å‰ç«¯ä¸»è¦åŠŸèƒ½å®ç°

**2024å¹´2æœˆ29æ—¥**

åç«¯è¿ç§»è‡³Spring Bootä¸‡ç”¨æ¨¡æ¿ï¼Œæ¥å£æ”¹å†™

**2024å¹´3æœˆ2æ—¥**
å‰ç«¯ç«¯å£æ”¹å†™ï¼šè¯·æ±‚æ•°æ®ç±»å‹ä½äº @/src/services/ant-design-pro/typing.d.ts
è¯·æ±‚æ¥å£ä½äº @config/proxy.ts

**2024å¹´3æœˆ5æ—¥**
MoonshotAI  APIè°ƒç”¨å®ç°

**2024å¹´3æœˆ6æ—¥**
chatè°ƒç”¨åç«¯å®ç°ï¼Œå‰ç«¯æƒŠç°ç¦»è°±bugã€‚Swaggeråç«¯è°ƒç”¨æµ‹è¯•æ­£å¸¸ï¼Œå‰ç«¯è°ƒç”¨ä¸€ç›´å‡ºé”™ã€‚æ§åˆ¶å°Networkå·²ç»æ˜¾ç¤ºå‡ºäº†è¿”å›çš„åŒ…ï¼Œä½†æ˜¯æŠ›å‡ºå¼‚å¸¸äº†ã€‚

**2024å¹´3æœˆ7æ—¥** 
Configurl.ts é‡Œé¢å®šä¹‰äº†åªæœ‰è¿”å›çš„å¤´éƒ¨Codeä¸ä¸º0ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ä¿®æ”¹å®Œæˆåï¼Œåˆç‰ˆdemoå®ç°ã€‚ http://keriko.fun/index.php/archives/36/

**2024å¹´3æœˆ11æ—¥**
ç®€å†ä¸Šä¼ å¹¶è§£æåŠŸèƒ½å®ç° ã€‚http://keriko.fun/index.php/archives/36/

**2024å¹´3æœˆ15æ—¥** 
ä¸»ä½“åŠŸèƒ½å®ç°ï¼Œç®€å†ã€JDè§£æï¼Œè¿ç»­æé—®ï¼Œé¢è¯•è¯„ä»· http://keriko.fun/index.php/archives/43/

**2024å¹´3æœˆ16æ—¥**
é¡¹ç›®éƒ¨ç½²ä¸Šçº¿ã€‚ï¼ˆè¿ç»­ä¼šè¯å®ç°ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šæ–°å»ºsessionï¼‰

**2024å¹´3æœˆ17æ—¥**
apiè¯·æ±‚åœ°å€ä¸å¯†é’¥å…¨å±€å°è£…ç»Ÿä¸€ï¼›æ–‡ä»¶è·¯å¾„ä¿®æ”¹ï¼ˆwindowsï¼š\      Linux  /)







# æ•°æ®åº“è¡¨è®¾è®¡
**ç”¨æˆ·è¡¨user**

| åç§°                | ç±»å‹ | å¤‡æ³¨ |
| ------------------- | ---- | ---- |
| id                  |      | ä¸»é”® |
| userAccount         |      | å”¯ä¸€ |
| userPassword        |      |      |
| userName            |      |      |
| userAvatar          |      |      |
| createTime          |      |      |
| updateTime          |      |      |
| isDelete            |      |      |
**å¯¹è¯åˆ—è¡¨context**   

| åç§°             | ç±»å‹ | å¤‡æ³¨            |
| ---------------- | ---- | --------------- |
| id               |      | ä¸»é”®            |
| timeStamp        |      | æ—¶é—´æˆ³          |
| userAccount      |      | å¤–é”®            |
| messageRole      |      | assistantï¼Œuser |
| messageContent   |      | å†…å®¹            |
| listId           |      | å¤–é”®            |
| messageModel     |      | 8k,32k,128k     |
| promptTokens     | int  |                 |
| completionTokens | int  |                 |
| totalTokens      | int  |                 |

**ä¼šè¯åˆ—è¡¨list**

| åç§°        | ç±»å‹ | å¤‡æ³¨ |
| ----------- | ---- | ---- |
| listId      | int  | ä¸»é”® |
| createTime  |      |      |
| userAccount |      | å¤–é”® |
| isDelete    |      |      |
|             |      |      |

# å‰åç«¯æ¨¡æ¿é£Ÿç”¨æ–¹æ³•
## æ·»åŠ æ–°çš„æ•°æ®åº“è¡¨å®ä½“ç±»æ“ä½œ
- æ•°æ®åº“é‡Œé¢æ·»åŠ è¡¨åŠç›¸åº”æ•°æ®
- IDEAè¿æ¥å¯¹åº”çš„æ•°æ®åº“è¡¨ï¼Œå³é”®é€‰æ‹©â€œMybatisX-Generatorâ€(æ’ä»¶ï¼Œéœ€è¦è‡ªè¡Œå®‰è£…)
- æ ¹æ®éœ€è¦é…ç½®éœ€è¦çš„é€‰é¡¹
  ![Pasted image 20240304193644](https://s2.loli.net/2024/03/07/kojxycBIORrZ654.png)
  å¯ä»¥base package å®šä½åˆ°å¦å¤–çš„åŒ…ï¼ˆé˜²æ­¢å‡ºé”™ï¼Œå½±å“æ•´ä¸ªé¡¹ç›®ï¼‰ï¼Œä½†æ˜¯æ¯æ¬¡ç§»åŠ¨æ–‡ä»¶æ—¶ï¼Œxmlçš„å†…å®¹å¹¶ä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚
  æ³¨æ„serviceï¼Œ./resource/mapper/xxxxxMapper.xml é‡Œé¢çš„å„ç§å¼•ç”¨æ˜¯å¦æ­£ç¡®ï¼Œxmlå¼•å·é‡Œé¢çš„å¼•ç”¨å¯èƒ½ä¸ä¼šè‡ªåŠ¨æ›´æ”¹ã€‚
  ![Pasted image 20240304194122](https://s2.loli.net/2024/03/07/btdrsMRm9Yx8QKZ.png)
- entityçš„æ³¨è§£
@TableId(type = IdType.ASSIGN_ID)  
private Integer id;
ä¸»é”®IDï¼ˆéšæœº)

@TableLogic  
private Integer isDelete;
é€»è¾‘åˆ é™¤å­—æ®µ
- serviceé‡Œé¢å®ç°éœ€è¦çš„å„ç§æ–¹æ³•ï¼ˆserviceå®šä¹‰ï¼Œimplå®ç°ï¼‰
- é€šä¹‰çµç å¯ä»¥ç›´æ¥ç”Ÿæˆserviceçš„å•å…ƒæµ‹è¯•ä»£ç 
- å¯¹äºè¦ä½¿ç”¨å‰ç«¯ä¼ å›å¯¹è±¡çš„æƒ…å†µï¼Œå¯ä»¥åœ¨DTOå±‚å®šä¹‰ä¸€ä¸ªç±»æ˜¯å®ç°
# é‡åˆ°çš„é—®é¢˜
## ant design proæ¡†æ¶æ›´æ”¹
Header å¤´éƒ¨ç»„ä»¶ä¸€ç›´æœªæ‰¾åˆ°ï¼šé€šè¿‡é˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼Œå®šä½app.tsxï¼Œ
ç”¨æˆ·åã€å¤´åƒä¿¡æ¯å¯ä»¥é€šè¿‡é…ç½®å…¨å±€åˆå§‹åŒ–ä¿¡æ¯æ¥æä¾›æ•°æ®ã€‚
```ts
// src/app.tsx
import React from 'react';
export const layout = {
  rightRender: (initialState, setInitialState) => {
    // xxx
    return 'xxx';
  },
};
```
`rightRender` æ‰ä¸ºçœŸæ­£çš„å¯¼èˆªæ å³ä¾§ç»„ä»¶

è¿™ä¸ªSettingDraweråœ¨æ–‡æ¡£é‡Œè¯´åªåœ¨å¼€å‘æ¨¡å¼ä¸‹å‡ºç°, ä½†æ˜¯æˆ‘ç”¨çš„è¿™ä¸ªç‰ˆæœ¬æ‰“åŒ…éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä»ç„¶ä¼šæ˜¾ç¤º, éœ€è¦/src/app.tsx ä¸­æ·»åŠ ä¸‹é¢è¿™ä¸€è¡Œè®©å®ƒåªåœ¨å¼€å‘ç¯å¢ƒä¸­å‡ºç°

## è·å–å½“å‰ç”¨æˆ·
```typescript
import {useModel} from "@@/plugin-model/useModel";

const { initialState} = useModel('@@initialState');  
const loading = (  
  <span className={`${styles.action} ${styles.account}`}>  
    <Spin      size="small"  
      style={{  
        marginLeft: 8,  
        marginRight: 8,  
      }}  
    />  
  </span>);  
  
if (!initialState) {  
  return loading;  
}  
  
const { currentUser } = initialState;  
  
if (!currentUser) {  
  return loading;  
}
```
ant designåœ¨ç™»å½•æ—¶å°±è·å–äº†å½“å‰ç”¨æˆ·å¾—ä¿¡æ¯ï¼Œé€šè¿‡è¿™äº›è¯­å¥ï¼Œå°±å¯ä»¥åœ¨å½“å‰é¡µé¢ä½¿ç”¨currentUseråŠå…¶å±æ€§å€¼ã€‚ï¼ˆæ‰¾çŒ«ç”»ç“¢å‡ºæ¥ï¼Œå¹¶æœªå®ç°ï¼‰
## ä¼šè¯æ¥å£å®ç°
ä¸ºäº†å®ç°ä¼šè¯çš„ä¸Šä¸‹æ–‡ä¿æŒï¼Œä½ éœ€è¦åœ¨æœåŠ¡å™¨ç«¯å­˜å‚¨æ¯æ¬¡è¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚è¿™æ ·ï¼Œå½“ç”¨æˆ·å†æ¬¡å‘èµ·è¯·æ±‚æ—¶ï¼Œä½ å¯ä»¥ä»æœåŠ¡å™¨ç«¯è·å–ä¹‹å‰çš„å¯¹è¯å†…å®¹ï¼Œå¹¶å°†å…¶ä½œä¸ºæ–°çš„è¯·æ±‚çš„ä¸€éƒ¨åˆ†ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨Spring Boot Controllerä¸­å®ç°è¿™ä¸€åŠŸèƒ½ï¼š
## ä¸»é¢˜é…ç½®ç›¸å…³
è¿™ä¸ªSettingDraweråœ¨æ–‡æ¡£é‡Œè¯´åªåœ¨å¼€å‘æ¨¡å¼ä¸‹å‡ºç°, ä½†æ˜¯æˆ‘ç”¨çš„è¿™ä¸ªç‰ˆæœ¬æ‰“åŒ…éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä»ç„¶ä¼šæ˜¾ç¤º, éœ€è¦/src/app.tsx ä¸­æ·»åŠ ä¸‹é¢è¿™ä¸€è¡Œè®©å®ƒåªåœ¨å¼€å‘ç¯å¢ƒä¸­å‡ºç°ã€‚
```ts
{(process.env.NODE_ENV === "development")&&!props.location?.pathname?.includes('/login') && (  
  <SettingDrawer  
    enableDarkTheme  
    settings={initialState?.settings}  
    onSettingChange={(settings) => {  
      setInitialState((preInitialState) => ({  
        ...preInitialState,  
        settings,  
      }));  
    }}
```
æƒ³è®¾ç½®æ·±è‰²æ¨¡å¼åˆ‡æ¢çš„æŒ‰é’®ï¼Œ`darkreader`æœªç”Ÿæ•ˆï¼Œåªæ”¾äº†æŒ‰é’®ã€‚ä¸å½±å“æ•´ä½“é¡¹ç›®ï¼Œå…ˆæç½®ã€‚
## å‰ç«¯è°ƒç”¨æ¥å£è‡ªåŠ¨ç”Ÿæˆ
openapi è§„èŒƒ ï¼ˆæ¥å£æ–‡æ¡£è§„èŒƒï¼‰
åç«¯æ¨¡æ¿ä½¿ç”¨çš„swaggerçš„openaiç‰ˆæœ¬ä¸ºv2ï¼Œä¸å‰ç«¯ä¸å…¼å®¹ï¼Œå¯¼è‡´å‡ºé”™ã€‚å‡çº§åæ¢å¤ã€‚
## chatè°ƒç”¨æµç¨‹
ç¬¬ä¸€æ¬¡å®Œæ•´åœ°è‡ªå·±åšä¸€ä¸ªéCURDçš„å®Œæ•´é€»è¾‘ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›æ”¶è·çš„ã€‚
å†ä¸€æ¬¡è®¤è¯†åˆ°äº†é¢å‘å¯¹è±¡çš„é‡è¦æ€§ã€‚
ç”¨æˆ·chatçš„è®¾è®¡æµç¨‹ï¼š
- 1
å¯¹äºä¸åŒæ¥å£ç›´æ¥çš„è°ƒç”¨ï¼Œéœ€è¦è®¾è®¡ä¸åŒçš„ç±»æ¥å®ç°

å¯¹äºService chatæ–¹æ³•çš„å®ç°ï¼ŒæŠŠä¸Šè¿°å…¨éƒ¨åŠŸèƒ½æ–¹æ³•ä¸€ä¸ªæ–¹æ³•é‡Œè¿‡äºå†—æ‚ã€‚å¯ä»¥å®ç°ä¸€äº›ç§æœ‰æ–¹æ³•ï¼Œå¹¶ä¸å¯¹å¤–æä¾›ï¼Œæ¥å®ç°è¿™äº›å°åŠŸèƒ½ã€‚
**å¯¹è±¡è¿‡å¤šï¼ŒæŠŠè‡ªå·±ç»•æ™•äº†**
åœ¨æµç¨‹å’Œå¯¹è±¡è®¾è®¡å¥½ä¹‹åè®°å¾—ç”»ç”¨ä¾‹å›¾ï¼ŒæŠŠæ‰€æœ‰çš„ç±»å·²ç»å„ç§æ–¹æ³•çš„å‚æ•°åŠè¿”å›ä¸€ä¸€æ ‡æ³¨å¯¹ç…§æ¥å†™ã€‚
å¦‚ä¸‹ï¼ˆä¸è§„èŒƒç‰ˆï¼‰ï¼š
![Chatè°ƒç”¨è¿‡ç¨‹ (1)](https://s2.loli.net/2024/03/07/a59bs3ZSLflkwY1.png)

## æ–‡ä»¶ä¸Šä¼ æ¥å£ä¸å¯¹

ç«¯ä½¿ç”¨ Ant Design æä¾›çš„upload ç»„ä»¶ã€‚
ï¼ˆç»éªŒï¼šå…ˆä½¿ç”¨æœ€ç®€å•çš„ç»„ä»¶ï¼Œéœ€è¦ä»€ä¹ˆæ…¢æ…¢å¾€ä¸ŠåŠ ã€‚ä¸ç„¶çœŸçš„å¤´ç§ƒã€‚ï¼‰

```javascript
const props: UploadProps = {  
  name: 'cvfile',  
  //TODO å¼€å‘è®¿é—®åœ°å€  
  action: 'http://localhost:8101/api/upload', 
  showUploadList: false,  
  maxCount: 1, //è¿™æ ·å®é™…ä¸ç”Ÿæ•ˆ
  disabled: false, //å¯ä»¥é€šè¿‡è®¾ç½®å…¶ç†Ÿæ‚‰æ¥é™åˆ¶ä¸€æ¬¡ä¼šè¯åªä¸Šä¼ ä¸€æ¬¡ä¿¡æ¯
  headers: {  
    authorization: 'authorization-text',  
  },  
  onChange(info) {  
  if (info.file.status === 'done') {  
      message.success(`${info.file.name} file uploaded successfully`);  
      });  
    } else if (info.file.status === 'error') {  
      message.error(`${info.file.name} file upload failed.`);  
    }  
  },  
};

//æ‚¬æµ®çƒæ•ˆæœ
<Upload {...props} >  
  <Tooltip title="ç®€å†ä¸Šä¼ ">  
    <FloatButton onClick={onFloatClick} />  
  </Tooltip></Upload>
```

[![Pasted image 20240311215218](https://s2.loli.net/2024/03/11/9hDVaElqUmzZ4Iv.png)](https://s2.loli.net/2024/03/11/9hDVaElqUmzZ4Iv.png)
åç«¯å®ç°

```java
@PostMapping("/upload")  
public ResponseEntity<String> uploadFile(@RequestParam("cvfile")  MultipartFile file) {  
    if (file.isEmpty()) {  
        return new ResponseEntity<>("è¯·é€‰æ‹©æ–‡ä»¶", HttpStatus.BAD_REQUEST);  
    }  
  
    try {  
        String fileName = file.getOriginalFilename();  
        // è®¾ç½®æ–‡ä»¶å­˜å‚¨è·¯å¾„  
        Path path = Paths.get(uploadPath, fileName);  
        // ä¿å­˜æ–‡ä»¶  
        Files.copy(file.getInputStream(), path);  
        return new ResponseEntity<>("æ–‡ä»¶ä¸Šä¼ æˆåŠŸ: " + fileName, HttpStatus.OK);  
    } catch (Exception e) {  
        e.printStackTrace();  
        return new ResponseEntity<>("æ–‡ä»¶ä¸Šä¼ å¤±è´¥", HttpStatus.INTERNAL_SERVER_ERROR); 
    }
}
```

**JAVA**

è¿™æ ·å°±èƒ½å®ç°ç”¨æˆ·çš„ç®€å†ä¸Šä¼ åŠŸèƒ½ã€‚
å‰æœŸæŠŠå‰ç«¯è°ƒç”¨åç«¯çš„æ¥å£å†™é”™äº†ï¼ˆ/file/uploadï¼‰ï¼Œå…¶ä¸ºæ¨¡æ¿å®šä¹‰çš„å¤´åƒä¸Šä¼ æ¥å£ã€‚ä¸€ç›´æŠ¥è¯·æ±‚å‚æ•°é”™è¯¯ï¼Œç›´åˆ°æŠŠSwaggerå°±å›æ¥æ‰å‘ç°è¯·æ±‚é”™äº†æ¥å£ã€‚ï¼ˆæ˜¯æˆ‘é”™æ€ªAnt designäº†ï¼‰

**åç»­**

ç”±äºå®˜æ–¹ç»“æ„åªä¼ é€’äº†æ–‡ä»¶ï¼Œåç«¯æ— æ³•è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ï¼ˆå…¶å®ä¹Ÿè¡Œï¼Ÿï¼‰

æ”¹å†™æ¥å£

customRequest	é€šè¿‡è¦†ç›–é»˜è®¤çš„ä¸Šä¼ è¡Œä¸ºï¼Œå¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„ä¸Šä¼ å®ç°	function

```typescript
async function uploadCvFile(option: { file: any }) {
    const file = option.file as File;

    // å¦‚æœæ–‡ä»¶ç±»å‹å’Œå¤§å°éƒ½ç¬¦åˆè¦æ±‚ï¼Œè°ƒç”¨åç«¯ä¸Šä¼ æ¥å£
    try {
      const formData = new FormData();
      formData.append('cvfile', file); // å‡è®¾åç«¯æœŸæœ›æ–‡ä»¶å­—æ®µåä¸º'file'
      // @ts-ignore
      const requestFileBody: ContextRequest = {
        userAccount: 'admin',
        messageRole: 'user',
        messageContent: '',
        listId: 81097580,
      };
      console.log('å¼€å§‹ä¸Šä¼ ');

      appendMsg({
        type: 'text',
        content: { text: `${file.name}` },
        position: 'right',
        user: {
          avatar:
            // @ts-ignore
            currentUser.userAvatar ?? 'https://pic.imgdb.cn/item/65eae1529f345e8d03011b3b.png',
        },
      });
      const cvcontent = await uploadFile(requestFileBody, formData);
      // @ts-ignore
      const requestCvBody: ContextRequest = {
        userAccount: 'admin',
        messageRole: 'user',
        messageContent: cvcontent,
        listId: 81097580,
      };
      const response = await chat(requestCvBody);
      console.log(response);
      appendMsg({
        type: 'text',
        content: { text: response.messageContent },
        position: 'left',
        user: { avatar: '//gw.alicdn.com/tfs/TB1DYHLwMHqK1RjSZFEXXcGMXXa-56-62.svg' },
      });
    } catch (error) {
      console.error('Error uploading file:', error);
      throw error; // å¯ä»¥é€‰æ‹©æŠ›å‡ºé”™è¯¯ï¼Œä¹Ÿå¯ä»¥æ ¹æ®å®é™…æƒ…å†µå¤„ç†é”™è¯¯é€»è¾‘
    }
  }
```

**TODO å¼‚æ­¥åŒ–æ”¹å†™** ï¼ˆç”¨æˆ·ç­‰å¾…æ—¶é—´è¿‡é•¿ï¼‰

## apiKeyç­‰å¸¸é‡ä¸èƒ½å…¨å±€ç”Ÿæ•ˆ

åœ¨é…ç½®æ–‡ä»¶application.ymlæ–‡ä»¶ä¸­ï¼Œå†™å…¥éœ€è¦ä½¿ç”¨çš„å…¨å±€å˜é‡

```properties
file:  
  upload:  
    path: E:\TestUpload
```

application.propertieså†™æ³•

```
file.upload.path: E:\TestUpload
```

ç„¶ååˆ›å»ºä¸€ä¸ªå®ä½“ç±»ï¼Œåœ¨å®ä½“ç±»çš„å±æ€§ä¸­ç›´æ¥ç”¨ **@Value** æ³¨è§£è·å–é…ç½®æ–‡ä»¶ä¸­çš„å¸¸é‡

```java
import org.springframework.beans.factory.annotation.Value;  
import org.springframework.stereotype.Component;  
  
@Component  
public class FilePath {  
    public String getUploadPath() {  
        return uploadPath;  
    }  
  
    public void setUploadPath(String uploadPath) {  
        this.uploadPath = uploadPath;  
    }  
  
    @Value("${file.upload.path}")  
    String uploadPath;  
}
```

åœ¨ä½¿ç”¨çš„åœ°æ–¹ ç”¨ **@Autowired** æ³¨è§£å®ä¾‹åŒ–contentå¯¹è±¡ï¼Œç„¶åç›´æ¥content.getå±æ€§ å³å¯è·å¾—å¸¸é‡ã€‚ä¾‹å­å¦‚ä¸‹ï¼š

```java
@Autowired  
    private FilePath filePath;

@RequestMapping("/test")
    public  String tt(){
        System.out.println("å¸¸é‡path:"+filePath.getUploadPath());
        return null;
    }
```

### è£…é…ä¸ç”Ÿæ•ˆ ï¼ˆå¸¸é‡å¯¹è±¡ä¸ºnullï¼‰

ä¸€ã€åœ¨é™æ€å˜é‡ä¸Šä½¿ç”¨å¤±æ•ˆ

ç¬¬ä¸€ç§æƒ…å†µæ˜¯åœ¨é™æ€å˜é‡ä¸Šæ— æ³•ä½¿ç”¨æ³¨è§£ï¼Œ@Autowireæ³¨è§£è‡ªç„¶å¤±æ•ˆã€‚è™½ç„¶æ³¨å…¥æ—¶ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å½“è¿è¡Œæ—¶æœŸä½¿ç”¨æ³¨å…¥çš„å¯¹è±¡æ—¶ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚

```java
public class demoUtils {
    //æ­¤æ—¶è™½ç„¶ä¸æŠ¥é”™ï¼Œè¿è¡Œæ—¶æ±‡æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸
    @Autowired
    private static User user;
    public static void test(){
        user.setName("zql");
        System.out.println(user.getName());
    }
}
```

è¿™æ—¶å°±éœ€è¦newå¯¹è±¡ï¼Œæ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨å¤šçº¿ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼è§£å†³ã€‚

```java
public class DemoUtils {

    /*@Autowired
    private static User user;*/

    private static User user = new User();

    public static void test(){
        user.setName("zql");
        System.out.println(user.getName());
    }
}
```

äºŒã€newçš„å¯¹è±¡ä¸­ä½¿ç”¨@Autowireæ³¨å…¥å…¶ä»–ç±»

å¦‚æœæœ‰ Aï¼ŒBï¼ŒC ä¸‰ä¸ªç±»ï¼Œåœ¨ A ä¸­ new B()ï¼Œåœ¨ B ä¸­ä½¿ç”¨@Autowireæ³¨å…¥ Cï¼Œæ­¤æ—¶çš„@Autowireæ³¨è§£ä¹Ÿä¼šå¤±æ•ˆï¼ŒCæ— æ³•æ³¨å…¥ï¼Œè¿è¡Œæ—¶æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ä»¥ä¸‹æ˜¯æµ‹è¯•ã€‚

ç›¸å½“äº A ç±»ã€‚

```java
@RestController
public class AController {

    BService bService = new BService();

    @GetMapping("/test")
    public String test(){
        bService.test();
        return "æ­£å¸¸æ‰§è¡ŒæˆåŠŸ";
    }
}
```

ç›¸å½“äº B ç±»ï¼Œåœ¨æ³¨å…¥æ—¶æ­£å¸¸ï¼Œè¿è¡Œæ—¶æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚

```java
@Service
public class BService {
    //æ³¨è§£å¤±æ•ˆï¼Œè¿è¡Œæ—¶ä¼šå‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸
    @Autowired
    CService cService;
    public void test(){
        cService.testHello();
    }
}
```

ç›¸å½“äº C ç±»ã€‚

```java
@Service
public class CService {
    public void testHello(){
        System.out.println("hello,world");
    }
}
```

**ç±»æ¯”æ€è€ƒ** 

ä¸€èˆ¬å¸¸åœ¨ XXXServiceImplä¸­æ¥ä½¿ç”¨å¸¸é‡ï¼Œnew Serviceçš„æ—¶å€™å¹¶ä¸ä¼šnew implï¼Œå› æ­¤å¸¸é‡å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚
ä½†è‹¥æ˜¯è‡ªå·±å†™çš„Serviceï¼Œè‹¥ç›´æ¥åœ¨Serviceä¸­æ³¨å…¥äº†å¦å¤–ä¸€ä¸ªç±»ï¼Œè€Œä¸”è¿˜é€šè¿‡newä½¿ç”¨äº†ï¼Œå°±ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸é”™è¯¯ã€‚

è§£å†³

è§£å†³æ–¹æ³•ï¼šåœ¨ A ç±»ä¸­ä½¿ç”¨@Autowireæ³¨è§£æ¥æ³¨å…¥ B ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
@RestController
public class AController {

    //BService bService = new BService();
    @Autowired
    BService bService;

    @GetMapping("/test")
    public String test(){
        bService.test();
        return "æ­£å¸¸æ‰§è¡ŒæˆåŠŸ";
    }
}
```

å½“ç„¶åœ¨ B ä¸­å°†@Autowireæ³¨è§£æ³¨å…¥Cï¼Œæ”¹æˆnew C()ä¹Ÿå¯ä»¥ï¼ˆä¸æ¨èï¼‰ã€‚

æ€»çš„æ¥è¯´ï¼šä½¿ç”¨@Autowireæ³¨è§£æ³¨å…¥ï¼Œéƒ½ä½¿ç”¨æ³¨è§£æ³¨å…¥ï¼ˆæ¨èï¼Œç”Ÿæˆçš„å¯¹è±¡äº¤ç»™äº†Springç®¡ç†ï¼‰ï¼›ä½¿ç”¨newï¼Œéƒ½ä½¿ç”¨newï¼ˆä¸æ¨èï¼‰ã€‚
## åŸºäºSessionå®ç°çš„ä¸Šä¸‹æ–‡å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šå¤±æ•ˆ

- æš‚æœªè§£å†³
  

# æ•ˆæœé¢„è§ˆ
## ä½¿ç”¨cozeåœ¨discordä¸Šçš„æ•ˆæœ
![Pasted image 20240226214842](https://s2.loli.net/2024/02/26/jq74OkJsG1lRUfI.png)
## ChatUIç•Œé¢åˆæ­¥å®ç°
![a7030bad120ce559187434b302d1a4b](https://s2.loli.net/2024/02/26/q7B3CmtlApMfYxz.png)
## è¿ç»­å¯¹è¯åŠŸèƒ½

![](https://pic.imgdb.cn/item/65eabc9e9f345e8d03a7d636.png)

## ä¸»ä½“åŠŸèƒ½å®ç°

![å°æ¢¦é¢è¯•å®˜æ•ˆæœé¢„è§ˆ](https://s2.loli.net/2024/03/16/vusSOYEDxQoAXFk.png)
